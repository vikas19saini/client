{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Projects\\\\client\\\\src\\\\components\\\\paycard\\\\components\\\\form\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nvar currentYear = new Date().getFullYear();\nvar monthsArr = Array.from({\n  length: 12\n}, function (x, i) {\n  var month = i + 1;\n  return month <= 9 ? '0' + month : month;\n});\nvar yearsArr = Array.from({\n  length: 9\n}, function (_x, i) {\n  return currentYear + i;\n});\nexport default function CForm(_ref) {\n  _s();\n\n  var _this = this;\n\n  var cardMonth = _ref.cardMonth,\n      cardYear = _ref.cardYear,\n      onUpdateState = _ref.onUpdateState,\n      cardNumberRef = _ref.cardNumberRef,\n      cardHolderRef = _ref.cardHolderRef,\n      cardDateRef = _ref.cardDateRef,\n      onCardInputFocus = _ref.onCardInputFocus,\n      onCardInputBlur = _ref.onCardInputBlur,\n      cardCvv = _ref.cardCvv,\n      children = _ref.children;\n\n  var _useState = useState(''),\n      cardNumber = _useState[0],\n      setCardNumber = _useState[1];\n\n  var handleFormChange = function handleFormChange(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n    onUpdateState(name, value);\n  }; // TODO: We can improve the regex check with a better approach like in the card component.\n\n\n  var onCardNumberChange = function onCardNumberChange(event) {\n    var _event$target2 = event.target,\n        value = _event$target2.value,\n        name = _event$target2.name;\n    var cardNumber = value;\n    value = value.replace(/\\D/g, '');\n\n    if (/^3[47]\\d{0,13}$/.test(value)) {\n      cardNumber = value.replace(/(\\d{4})/, '$1 ').replace(/(\\d{4}) (\\d{6})/, '$1 $2 ');\n    } else if (/^3(?:0[0-5]|[68]\\d)\\d{0,11}$/.test(value)) {\n      // diner's club, 14 digits\n      cardNumber = value.replace(/(\\d{4})/, '$1 ').replace(/(\\d{4}) (\\d{6})/, '$1 $2 ');\n    } else if (/^\\d{0,16}$/.test(value)) {\n      // regular cc number, 16 digits\n      cardNumber = value.replace(/(\\d{4})/, '$1 ').replace(/(\\d{4}) (\\d{4})/, '$1 $2 ').replace(/(\\d{4}) (\\d{4}) (\\d{4})/, '$1 $2 $3 ');\n    }\n\n    setCardNumber(cardNumber.trimRight());\n    onUpdateState(name, cardNumber);\n  };\n\n  var onCvvFocus = function onCvvFocus(event) {\n    onUpdateState('isCardFlipped', true);\n  };\n\n  var onCvvBlur = function onCvvBlur(event) {\n    onUpdateState('isCardFlipped', false);\n  }; // NOTE: Currently the cursor on the card number field gets reset if we remove a number, the code bellow was used\n  // in class components, need to transform this to work with functional components.\n  // getSnapshotBeforeUpdate() {\n  //     return this.props.cardNumberRef.current.selectionStart;\n  // }\n  // const componentDidUpdate = function (prevProps, prevState, cursorIdx) {\n  //     const node = cardNumberRef.current;\n  //     const { cardNumber: cardNum } = state;\n  //     const { cardNumber: prevCardNum } = prevState;\n  //     if (\n  //         cardNum.length > prevCardNum.length &&\n  //         cardNum[cursorIdx - 1] === ' '\n  //     ) {\n  //         cursorIdx += 1;\n  //     } else if (prevCardNum[cursorIdx - 1] === ' ') {\n  //         cursorIdx -= 1;\n  //     }\n  //     node.selectionStart = node.selectionEnd = cursorIdx;\n  // };\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card-form\",\n    id: \"cardForm\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-list\",\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-form__inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-input\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cardNumber\",\n          className: \"card-input__label\",\n          children: \"Card Number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"tel\",\n          name: \"cardNumber\",\n          className: \"card-input__input\",\n          autoComplete: \"off\",\n          onChange: onCardNumberChange,\n          maxLength: \"19\",\n          ref: cardNumberRef,\n          onFocus: function onFocus(e) {\n            return onCardInputFocus(e, 'cardNumber');\n          },\n          onBlur: onCardInputBlur,\n          value: cardNumber\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-input\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cardName\",\n          className: \"card-input__label\",\n          children: \"Card Holder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"card-input__input\",\n          autoComplete: \"off\",\n          name: \"cardHolder\",\n          onChange: handleFormChange,\n          ref: cardHolderRef,\n          onFocus: function onFocus(e) {\n            return onCardInputFocus(e, 'cardHolder');\n          },\n          onBlur: onCardInputBlur\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-form__row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-form__col\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-form__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"cardMonth\",\n              className: \"card-input__label\",\n              children: \"Expiration Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"card-input__input -select\",\n              value: cardMonth,\n              name: \"cardMonth\",\n              onChange: handleFormChange,\n              ref: cardDateRef,\n              onFocus: function onFocus(e) {\n                return onCardInputFocus(e, 'cardDate');\n              },\n              onBlur: onCardInputBlur,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                disabled: true,\n                children: \"Month\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 33\n              }, this), monthsArr.map(function (val, index) {\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: val,\n                  children: val\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 37\n                }, _this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"cardYear\",\n              className: \"card-input__input -select\",\n              value: cardYear,\n              onChange: handleFormChange,\n              onFocus: function onFocus(e) {\n                return onCardInputFocus(e, 'cardDate');\n              },\n              onBlur: onCardInputBlur,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                disabled: true,\n                children: \"Year\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 33\n              }, this), yearsArr.map(function (val, index) {\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: val,\n                  children: val\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 37\n                }, _this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-form__col -cvv\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-input\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"cardCvv\",\n              className: \"card-input__label\",\n              children: \"CVV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"tel\",\n              className: \"card-input__input\",\n              maxLength: \"4\",\n              autoComplete: \"off\",\n              name: \"cardCvv\",\n              onChange: handleFormChange,\n              onFocus: onCvvFocus,\n              onBlur: onCvvBlur,\n              ref: cardCvv\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CForm, \"c8zpYxIwBCBuW+d/H7FIIKmFYKA=\");\n\n_c = CForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CForm\");","map":{"version":3,"sources":["D:/Projects/client/src/components/paycard/components/form/index.js"],"names":["React","useEffect","useState","useRef","currentYear","Date","getFullYear","monthsArr","Array","from","length","x","i","month","yearsArr","_x","CForm","cardMonth","cardYear","onUpdateState","cardNumberRef","cardHolderRef","cardDateRef","onCardInputFocus","onCardInputBlur","cardCvv","children","cardNumber","setCardNumber","handleFormChange","event","target","name","value","onCardNumberChange","replace","test","trimRight","onCvvFocus","onCvvBlur","e","map","val","index"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,MAArC,QAAmD,OAAnD;AAEA,IAAMC,WAAW,GAAG,IAAIC,IAAJ,GAAWC,WAAX,EAApB;AACA,IAAMC,SAAS,GAAGC,KAAK,CAACC,IAAN,CAAW;AAAEC,EAAAA,MAAM,EAAE;AAAV,CAAX,EAA2B,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACnD,MAAMC,KAAK,GAAGD,CAAC,GAAG,CAAlB;AACA,SAAOC,KAAK,IAAI,CAAT,GAAa,MAAMA,KAAnB,GAA2BA,KAAlC;AACH,CAHiB,CAAlB;AAIA,IAAMC,QAAQ,GAAGN,KAAK,CAACC,IAAN,CAAW;AAAEC,EAAAA,MAAM,EAAE;AAAV,CAAX,EAA0B,UAACK,EAAD,EAAKH,CAAL;AAAA,SAAWR,WAAW,GAAGQ,CAAzB;AAAA,CAA1B,CAAjB;AAEA,eAAe,SAASI,KAAT,OAWZ;AAAA;;AAAA;;AAAA,MAVCC,SAUD,QAVCA,SAUD;AAAA,MATCC,QASD,QATCA,QASD;AAAA,MARCC,aAQD,QARCA,aAQD;AAAA,MAPCC,aAOD,QAPCA,aAOD;AAAA,MANCC,aAMD,QANCA,aAMD;AAAA,MALCC,WAKD,QALCA,WAKD;AAAA,MAJCC,gBAID,QAJCA,gBAID;AAAA,MAHCC,eAGD,QAHCA,eAGD;AAAA,MAFCC,OAED,QAFCA,OAED;AAAA,MADCC,QACD,QADCA,QACD;;AAAA,kBACqCxB,QAAQ,CAAC,EAAD,CAD7C;AAAA,MACQyB,UADR;AAAA,MACoBC,aADpB;;AAGC,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD,EAAW;AAAA,wBACRA,KAAK,CAACC,MADE;AAAA,QACxBC,IADwB,iBACxBA,IADwB;AAAA,QAClBC,KADkB,iBAClBA,KADkB;AAGhCd,IAAAA,aAAa,CAACa,IAAD,EAAOC,KAAP,CAAb;AACH,GAJD,CAHD,CASC;;;AACA,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACJ,KAAD,EAAW;AAAA,yBACZA,KAAK,CAACC,MADM;AAAA,QAC5BE,KAD4B,kBAC5BA,KAD4B;AAAA,QACrBD,IADqB,kBACrBA,IADqB;AAElC,QAAIL,UAAU,GAAGM,KAAjB;AACAA,IAAAA,KAAK,GAAGA,KAAK,CAACE,OAAN,CAAc,KAAd,EAAqB,EAArB,CAAR;;AACA,QAAI,kBAAkBC,IAAlB,CAAuBH,KAAvB,CAAJ,EAAmC;AAC/BN,MAAAA,UAAU,GAAGM,KAAK,CACbE,OADQ,CACA,SADA,EACW,KADX,EAERA,OAFQ,CAEA,iBAFA,EAEmB,QAFnB,CAAb;AAGH,KAJD,MAIO,IAAI,+BAA+BC,IAA/B,CAAoCH,KAApC,CAAJ,EAAgD;AACnD;AACAN,MAAAA,UAAU,GAAGM,KAAK,CACbE,OADQ,CACA,SADA,EACW,KADX,EAERA,OAFQ,CAEA,iBAFA,EAEmB,QAFnB,CAAb;AAGH,KALM,MAKA,IAAI,aAAaC,IAAb,CAAkBH,KAAlB,CAAJ,EAA8B;AACjC;AACAN,MAAAA,UAAU,GAAGM,KAAK,CACbE,OADQ,CACA,SADA,EACW,KADX,EAERA,OAFQ,CAEA,iBAFA,EAEmB,QAFnB,EAGRA,OAHQ,CAGA,yBAHA,EAG2B,WAH3B,CAAb;AAIH;;AAEDP,IAAAA,aAAa,CAACD,UAAU,CAACU,SAAX,EAAD,CAAb;AACAlB,IAAAA,aAAa,CAACa,IAAD,EAAOL,UAAP,CAAb;AACH,GAvBD;;AAyBA,MAAMW,UAAU,GAAG,SAAbA,UAAa,CAACR,KAAD,EAAW;AAC1BX,IAAAA,aAAa,CAAC,eAAD,EAAkB,IAAlB,CAAb;AACH,GAFD;;AAIA,MAAMoB,SAAS,GAAG,SAAZA,SAAY,CAACT,KAAD,EAAW;AACzBX,IAAAA,aAAa,CAAC,eAAD,EAAkB,KAAlB,CAAb;AACH,GAFD,CAvCD,CA2CC;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,sBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,EAAE,EAAC,UAA9B;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,gBAA4BO;AAA5B;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,gCACI;AAAO,UAAA,OAAO,EAAC,YAAf;AAA4B,UAAA,SAAS,EAAC,mBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AACI,UAAA,IAAI,EAAC,KADT;AAEI,UAAA,IAAI,EAAC,YAFT;AAGI,UAAA,SAAS,EAAC,mBAHd;AAII,UAAA,YAAY,EAAC,KAJjB;AAKI,UAAA,QAAQ,EAAEQ,kBALd;AAMI,UAAA,SAAS,EAAC,IANd;AAOI,UAAA,GAAG,EAAEd,aAPT;AAQI,UAAA,OAAO,EAAE,iBAACoB,CAAD;AAAA,mBAAOjB,gBAAgB,CAACiB,CAAD,EAAI,YAAJ,CAAvB;AAAA,WARb;AASI,UAAA,MAAM,EAAEhB,eATZ;AAUI,UAAA,KAAK,EAAEG;AAVX;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAmBI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,gCACI;AAAO,UAAA,OAAO,EAAC,UAAf;AAA0B,UAAA,SAAS,EAAC,mBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AACI,UAAA,IAAI,EAAC,MADT;AAEI,UAAA,SAAS,EAAC,mBAFd;AAGI,UAAA,YAAY,EAAC,KAHjB;AAII,UAAA,IAAI,EAAC,YAJT;AAKI,UAAA,QAAQ,EAAEE,gBALd;AAMI,UAAA,GAAG,EAAER,aANT;AAOI,UAAA,OAAO,EAAE,iBAACmB,CAAD;AAAA,mBAAOjB,gBAAgB,CAACiB,CAAD,EAAI,YAAJ,CAAvB;AAAA,WAPb;AAQI,UAAA,MAAM,EAAEhB;AARZ;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAnBJ,eAmCI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAA,oCACI;AACI,cAAA,OAAO,EAAC,WADZ;AAEI,cAAA,SAAS,EAAC,mBAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAOI;AACI,cAAA,SAAS,EAAC,2BADd;AAEI,cAAA,KAAK,EAAEP,SAFX;AAGI,cAAA,IAAI,EAAC,WAHT;AAII,cAAA,QAAQ,EAAEY,gBAJd;AAKI,cAAA,GAAG,EAAEP,WALT;AAMI,cAAA,OAAO,EAAE,iBAACkB,CAAD;AAAA,uBAAOjB,gBAAgB,CAACiB,CAAD,EAAI,UAAJ,CAAvB;AAAA,eANb;AAOI,cAAA,MAAM,EAAEhB,eAPZ;AAAA,sCASI;AAAQ,gBAAA,KAAK,EAAC,EAAd;AAAiB,gBAAA,QAAQ,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBATJ,EAaKjB,SAAS,CAACkC,GAAV,CAAc,UAACC,GAAD,EAAMC,KAAN;AAAA,oCACX;AAAoB,kBAAA,KAAK,EAAED,GAA3B;AAAA,4BACKA;AADL,mBAAaC,KAAb;AAAA;AAAA;AAAA;AAAA,yBADW;AAAA,eAAd,CAbL;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPJ,eA0BI;AACI,cAAA,IAAI,EAAC,UADT;AAEI,cAAA,SAAS,EAAC,2BAFd;AAGI,cAAA,KAAK,EAAEzB,QAHX;AAII,cAAA,QAAQ,EAAEW,gBAJd;AAKI,cAAA,OAAO,EAAE,iBAACW,CAAD;AAAA,uBAAOjB,gBAAgB,CAACiB,CAAD,EAAI,UAAJ,CAAvB;AAAA,eALb;AAMI,cAAA,MAAM,EAAEhB,eANZ;AAAA,sCAQI;AAAQ,gBAAA,KAAK,EAAC,EAAd;AAAiB,gBAAA,QAAQ,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBARJ,EAYKV,QAAQ,CAAC2B,GAAT,CAAa,UAACC,GAAD,EAAMC,KAAN;AAAA,oCACV;AAAoB,kBAAA,KAAK,EAAED,GAA3B;AAAA,4BACKA;AADL,mBAAaC,KAAb;AAAA;AAAA;AAAA;AAAA,yBADU;AAAA,eAAb,CAZL;AAAA;AAAA;AAAA;AAAA;AAAA,oBA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAgDI;AAAK,UAAA,SAAS,EAAC,qBAAf;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACI;AACI,cAAA,OAAO,EAAC,SADZ;AAEI,cAAA,SAAS,EAAC,mBAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAOI;AACI,cAAA,IAAI,EAAC,KADT;AAEI,cAAA,SAAS,EAAC,mBAFd;AAGI,cAAA,SAAS,EAAC,GAHd;AAII,cAAA,YAAY,EAAC,KAJjB;AAKI,cAAA,IAAI,EAAC,SALT;AAMI,cAAA,QAAQ,EAAEd,gBANd;AAOI,cAAA,OAAO,EAAES,UAPb;AAQI,cAAA,MAAM,EAAEC,SARZ;AASI,cAAA,GAAG,EAAEd;AATT;AAAA;AAAA;AAAA;AAAA,oBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAhDJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAnCJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA+GH;;GA1LuBT,K;;KAAAA,K","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\n\nconst currentYear = new Date().getFullYear();\nconst monthsArr = Array.from({ length: 12 }, (x, i) => {\n    const month = i + 1;\n    return month <= 9 ? '0' + month : month;\n});\nconst yearsArr = Array.from({ length: 9 }, (_x, i) => currentYear + i);\n\nexport default function CForm({\n    cardMonth,\n    cardYear,\n    onUpdateState,\n    cardNumberRef,\n    cardHolderRef,\n    cardDateRef,\n    onCardInputFocus,\n    onCardInputBlur,\n    cardCvv,\n    children\n}) {\n    const [cardNumber, setCardNumber] = useState('');\n\n    const handleFormChange = (event) => {\n        const { name, value } = event.target;\n\n        onUpdateState(name, value);\n    };\n\n    // TODO: We can improve the regex check with a better approach like in the card component.\n    const onCardNumberChange = (event) => {\n        let { value, name } = event.target;\n        let cardNumber = value;\n        value = value.replace(/\\D/g, '');\n        if (/^3[47]\\d{0,13}$/.test(value)) {\n            cardNumber = value\n                .replace(/(\\d{4})/, '$1 ')\n                .replace(/(\\d{4}) (\\d{6})/, '$1 $2 ');\n        } else if (/^3(?:0[0-5]|[68]\\d)\\d{0,11}$/.test(value)) {\n            // diner's club, 14 digits\n            cardNumber = value\n                .replace(/(\\d{4})/, '$1 ')\n                .replace(/(\\d{4}) (\\d{6})/, '$1 $2 ');\n        } else if (/^\\d{0,16}$/.test(value)) {\n            // regular cc number, 16 digits\n            cardNumber = value\n                .replace(/(\\d{4})/, '$1 ')\n                .replace(/(\\d{4}) (\\d{4})/, '$1 $2 ')\n                .replace(/(\\d{4}) (\\d{4}) (\\d{4})/, '$1 $2 $3 ');\n        }\n\n        setCardNumber(cardNumber.trimRight());\n        onUpdateState(name, cardNumber);\n    };\n\n    const onCvvFocus = (event) => {\n        onUpdateState('isCardFlipped', true);\n    };\n\n    const onCvvBlur = (event) => {\n        onUpdateState('isCardFlipped', false);\n    };\n\n    // NOTE: Currently the cursor on the card number field gets reset if we remove a number, the code bellow was used\n    // in class components, need to transform this to work with functional components.\n    // getSnapshotBeforeUpdate() {\n    //     return this.props.cardNumberRef.current.selectionStart;\n    // }\n\n    // const componentDidUpdate = function (prevProps, prevState, cursorIdx) {\n    //     const node = cardNumberRef.current;\n    //     const { cardNumber: cardNum } = state;\n    //     const { cardNumber: prevCardNum } = prevState;\n    //     if (\n    //         cardNum.length > prevCardNum.length &&\n    //         cardNum[cursorIdx - 1] === ' '\n    //     ) {\n    //         cursorIdx += 1;\n    //     } else if (prevCardNum[cursorIdx - 1] === ' ') {\n    //         cursorIdx -= 1;\n    //     }\n    //     node.selectionStart = node.selectionEnd = cursorIdx;\n    // };\n\n    return (\n        <div className=\"card-form\" id=\"cardForm\">\n            <div className=\"card-list\">{children}</div>\n            <div className=\"card-form__inner\">\n                <div className=\"card-input\">\n                    <label htmlFor=\"cardNumber\" className=\"card-input__label\">\n                        Card Number\n                    </label>\n                    <input\n                        type=\"tel\"\n                        name=\"cardNumber\"\n                        className=\"card-input__input\"\n                        autoComplete=\"off\"\n                        onChange={onCardNumberChange}\n                        maxLength=\"19\"\n                        ref={cardNumberRef}\n                        onFocus={(e) => onCardInputFocus(e, 'cardNumber')}\n                        onBlur={onCardInputBlur}\n                        value={cardNumber}\n                    />\n                </div>\n\n                <div className=\"card-input\">\n                    <label htmlFor=\"cardName\" className=\"card-input__label\">\n                        Card Holder\n                    </label>\n                    <input\n                        type=\"text\"\n                        className=\"card-input__input\"\n                        autoComplete=\"off\"\n                        name=\"cardHolder\"\n                        onChange={handleFormChange}\n                        ref={cardHolderRef}\n                        onFocus={(e) => onCardInputFocus(e, 'cardHolder')}\n                        onBlur={onCardInputBlur}\n                    />\n                </div>\n\n                <div className=\"card-form__row\">\n                    <div className=\"card-form__col\">\n                        <div className=\"card-form__group\">\n                            <label\n                                htmlFor=\"cardMonth\"\n                                className=\"card-input__label\"\n                            >\n                                Expiration Date\n                            </label>\n                            <select\n                                className=\"card-input__input -select\"\n                                value={cardMonth}\n                                name=\"cardMonth\"\n                                onChange={handleFormChange}\n                                ref={cardDateRef}\n                                onFocus={(e) => onCardInputFocus(e, 'cardDate')}\n                                onBlur={onCardInputBlur}\n                            >\n                                <option value=\"\" disabled>\n                                    Month\n                                </option>\n\n                                {monthsArr.map((val, index) => (\n                                    <option key={index} value={val}>\n                                        {val}\n                                    </option>\n                                ))}\n                            </select>\n                            <select\n                                name=\"cardYear\"\n                                className=\"card-input__input -select\"\n                                value={cardYear}\n                                onChange={handleFormChange}\n                                onFocus={(e) => onCardInputFocus(e, 'cardDate')}\n                                onBlur={onCardInputBlur}\n                            >\n                                <option value=\"\" disabled>\n                                    Year\n                                </option>\n\n                                {yearsArr.map((val, index) => (\n                                    <option key={index} value={val}>\n                                        {val}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"card-form__col -cvv\">\n                        <div className=\"card-input\">\n                            <label\n                                htmlFor=\"cardCvv\"\n                                className=\"card-input__label\"\n                            >\n                                CVV\n                            </label>\n                            <input\n                                type=\"tel\"\n                                className=\"card-input__input\"\n                                maxLength=\"4\"\n                                autoComplete=\"off\"\n                                name=\"cardCvv\"\n                                onChange={handleFormChange}\n                                onFocus={onCvvFocus}\n                                onBlur={onCvvBlur}\n                                ref={cardCvv}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}